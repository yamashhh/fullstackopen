{"version":3,"sources":["components/FormInput.js","components/PersonForm.js","components/Persons.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["FormInput","label","type","value","onChange","style","display","required","PersonForm","onSubmit","name","onNameChange","number","onNumberChange","Persons","persons","deletePerson","listStyle","padding","map","person","onClick","id","Message","message","isError","className","baseUrl","getAll","a","axios","get","data","create","post","update","put","delete","personsService","App","useState","setPersons","filter","setFilter","filteredPersons","setFilteredPersons","newName","setNewName","newNumber","setNewNumber","setMessage","setIsError","useEffect","fetchData","personsToShow","length","toLowerCase","showMessage","error","setTimeout","handleError","request","status","response","prev","p","console","handleSubmit","event","preventDefault","existingPerson","find","window","confirm","updatedPerson","newPerson","createdPerson","concat","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.902e60ec.chunk.js","sourcesContent":["const FormInput = ({ label, type = \"text\", value, onChange }) => (\n  <label style={{ display: \"block\" }}>\n    {label} <input type={type} value={value} onChange={onChange} required />\n  </label>\n);\n\nexport default FormInput;\n","import FormInput from \"./FormInput\";\n\nconst PersonForm = ({\n  onSubmit,\n  name,\n  onNameChange,\n  number,\n  onNumberChange,\n}) => (\n  <form onSubmit={onSubmit}>\n    <FormInput label=\"name:\" value={name} onChange={onNameChange} />\n    <FormInput\n      label=\"number:\"\n      type=\"tel\"\n      value={number}\n      onChange={onNumberChange}\n    />\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","const Persons = ({ persons, deletePerson }) => {\n  return (\n    <ul style={{ listStyle: \"none\", padding: 0 }}>\n      {persons.map((person) => (\n        <li key={person.id}>\n          {person.name} {person.number}\n          <button onClick={() => deletePerson(person)}>delete</button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","const Message = ({ message, isError }) => {\n  return (\n    message && (\n      <p className={`message-component${isError ? \" -error\" : \"\"}`}>\n        {message}\n      </p>\n    )\n  );\n};\n\nexport default Message;\n","import axios from \"axios\";\nconst baseUrl = \"api/persons\";\n\nconst getAll = async () => (await axios.get(baseUrl)).data;\n\nconst create = async (person) => (await axios.post(baseUrl, person)).data;\n\nconst update = async (person) =>\n  (await axios.put(`${baseUrl}/${person.id}`, person)).data;\n\nconst deletePerson = async (id) => await axios.delete(`${baseUrl}/${id}`);\n\nconst personsService = {\n  getAll,\n  create,\n  update,\n  deletePerson,\n};\n\nexport default personsService;\n","import { useEffect, useState } from \"react\";\nimport FormInput from \"./components/FormInput\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Message from \"./components/Message\";\nimport personsService from \"./services/persons\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [isError, setIsError] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setPersons(await personsService.getAll());\n    };\n    fetchData();\n  }, []);\n\n  const personsToShow = filteredPersons.length ? filteredPersons : persons;\n\n  useEffect(\n    () =>\n      setFilteredPersons(\n        persons.filter(\n          (person) => person.name.toLowerCase() === filter.toLowerCase()\n        )\n      ),\n    [persons, filter]\n  );\n\n  const showMessage = (message, error = false) => {\n    setIsError(error);\n    setMessage(message);\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n\n  const handleError = (error, person) => {\n    if (error.request.status === 404 || error.response.status === 404) {\n      showMessage(\n        `The person \"${person.name}\" was not found, or has already been deleted from the server`,\n        true\n      );\n      return setPersons((prev) => prev.filter((p) => p.id !== person.id));\n    }\n    console.error({ ...error });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const existingPerson = persons.find((person) => person.name === newName);\n    if (existingPerson && existingPerson.number === newNumber)\n      return showMessage(`${newName} is already added to phonebook`, true);\n    if (\n      existingPerson &&\n      existingPerson.number !== newNumber &&\n      window.confirm(\n        `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n      )\n    ) {\n      try {\n        const updatedPerson = await personsService.update({\n          ...existingPerson,\n          number: newNumber,\n        });\n        setPersons((prev) =>\n          prev.map((person) =>\n            person.id === updatedPerson.id ? updatedPerson : person\n          )\n        );\n        return showMessage(`Updated ${updatedPerson.name}`);\n      } catch (error) {\n        handleError(error, existingPerson);\n      }\n    }\n\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    try {\n      const createdPerson = await personsService.create(newPerson);\n      setPersons((prev) => prev.concat(createdPerson));\n      showMessage(`Added ${createdPerson.name}`);\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } catch (error) {\n      handleError(error, newPerson);\n    }\n  };\n\n  const deletePerson = async (person) => {\n    if (window.confirm(`Delete ${person.name}?`))\n      try {\n        await personsService.deletePerson(person.id);\n        setPersons((prev) => prev.filter((p) => p.id !== person.id));\n        showMessage(`Deleted ${person.name}`);\n      } catch (error) {\n        handleError(error, person);\n      }\n  };\n\n  return (\n    <div className=\"app\">\n      <h2>Phonebook</h2>\n      <Message className=\"message\" message={message} isError={isError} />\n      <FormInput\n        label=\"filter shown with\"\n        value={filter}\n        onChange={(event) => setFilter(event.target.value)}\n      />\n      <h3>add a new</h3>\n      <PersonForm\n        onSubmit={handleSubmit}\n        name={newName}\n        onNameChange={(event) => setNewName(event.target.value)}\n        number={newNumber}\n        onNumberChange={(event) => setNewNumber(event.target.value)}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}
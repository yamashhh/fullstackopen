(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(19),u=n.n(c),o=n(9),s=n(1),i=n.n(s),b=n(4),l=n(5),p=n(0),f=function(e){var t=e.label,n=e.type,r=void 0===n?"text":n,a=e.value,c=e.onChange;return Object(p.jsxs)("label",{style:{display:"block"},children:[t," ",Object(p.jsx)("input",{type:r,value:a,onChange:c,required:!0})]})},d=function(e){var t=e.onSubmit,n=e.name,r=e.onNameChange,a=e.number,c=e.onNumberChange;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)(f,{label:"name:",value:n,onChange:r}),Object(p.jsx)(f,{label:"number:",type:"tel",value:a,onChange:c}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.persons,n=e.deletePerson;return Object(p.jsx)("ul",{style:{listStyle:"none",padding:0},children:t.map((function(e){return Object(p.jsxs)("li",{children:[e.name," ",e.number,Object(p.jsx)("button",{onClick:function(){return n(e)},children:"delete"})]},e._id)}))})},h=function(e){var t=e.message,n=e.isError;return t&&Object(p.jsx)("p",{className:"message-component".concat(n?" -error":""),children:t})},m=n(6),O=n.n(m),v="/api/persons",x=function(){var e=Object(b.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(v);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(v,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(v,"/").concat(t._id),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(v,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getAll:x,create:w,update:g,deletePerson:k},C=(n(44),function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),s=u[0],m=u[1],O=Object(r.useState)([]),v=Object(l.a)(O,2),x=v[0],w=v[1],g=Object(r.useState)(""),k=Object(l.a)(g,2),C=k[0],S=k[1],_=Object(r.useState)(""),N=Object(l.a)(_,2),E=N[0],P=N[1],A=Object(r.useState)(null),D=Object(l.a)(A,2),q=D[0],J=D[1],L=Object(r.useState)(!1),T=Object(l.a)(L,2),B=T[0],I=T[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=x.length?x:n;Object(r.useEffect)((function(){return w(n.filter((function(e){return e.name.toLowerCase()===s.toLowerCase()})))}),[n,s]);var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I(t),J(e),setTimeout((function(){J(null)}),5e3)},z=function(e,t){if(404===e.request.status||404===e.response.status)return U('The person "'.concat(t.name,'" was not found, or has already been deleted from the server'),!0),a((function(e){return e.filter((function(e){return e._id!==t._id}))}));console.error(Object(o.a)({},e))},F=function(){var e=Object(b.a)(i.a.mark((function e(t){var r,c,u,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(r=n.find((function(e){return e.name===C})))||r.number!==E){e.next=4;break}return e.abrupt("return",U("".concat(C," is already added to phonebook"),!0));case 4:if(!r||r.number===E||!window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?"))){e.next=16;break}return e.prev=5,e.next=8,y.update(Object(o.a)(Object(o.a)({},r),{},{number:E}));case 8:return c=e.sent,a((function(e){return e.map((function(e){return e._id===c._id?c:e}))})),e.abrupt("return",U("Updated ".concat(c.name)));case 13:e.prev=13,e.t0=e.catch(5),z(e.t0,r);case 16:return u={name:C,number:E},e.prev=17,e.next=20,y.create(u);case 20:s=e.sent,a((function(e){return e.concat(s)})),U("Added ".concat(s.name)),S(""),P(""),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(17),z(e.t1,u);case 30:case"end":return e.stop()}}),e,null,[[5,13],[17,27]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete ".concat(t.name,"?"))){e.next=11;break}return e.prev=1,e.next=4,y.deletePerson(t._id);case 4:a((function(e){return e.filter((function(e){return e._id!==t._id}))})),U("Deleted ".concat(t.name)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),z(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(h,{className:"message",message:q,isError:B}),Object(p.jsx)(f,{label:"filter shown with",value:s,onChange:function(e){return m(e.target.value)}}),Object(p.jsx)("h3",{children:"add a new"}),Object(p.jsx)(d,{onSubmit:F,name:C,onNameChange:function(e){return S(e.target.value)},number:E,onNumberChange:function(e){return P(e.target.value)}}),Object(p.jsx)("h3",{children:"Numbers"}),Object(p.jsx)(j,{persons:M,deletePerson:G})]})});u.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.e0859b5d.chunk.js.map